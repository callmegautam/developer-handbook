### Syntax and Semantics

`async` and `await` are built on top of **Promises** and provide a cleaner, synchronous-looking syntax for asynchronous code.

- An **`async` function** always returns a Promise.
    
- Inside it, **`await`** pauses execution until the awaited Promise settles.
    

```js
async function fetchData() {
  console.log("Fetching...");
  const data = await new Promise((resolve) =>
    setTimeout(() => resolve("Data received"), 1000)
  );
  console.log(data);
}
fetchData();
```

Behind the scenes, `await` is syntactic sugar for `.then()`, but it makes async flow easier to read and maintain.

---

### Error Handling with `try...catch`

Errors inside an async function can be handled using `try...catch`, instead of `.catch()` chaining.

```js
async function loadUser() {
  try {
    const res = await fetch("/user");
    const data = await res.json();
    console.log(data);
  } catch (err) {
    console.error("Error loading user:", err);
  } finally {
    console.log("Done");
  }
}
```

If any awaited promise rejects, control jumps directly to the `catch` block.

---

### Sequential vs Parallel Async Execution

#### Sequential Execution

Awaiting one promise after another executes them **in order**.

```js
async function sequential() {
  const a = await fetch("/a");
  const b = await fetch("/b");
  console.log("Done");
}
```

This waits for `/a` to finish before starting `/b`, which can be slower.

#### Parallel Execution

Start promises first, then await them together.

```js
async function parallel() {
  const aPromise = fetch("/a");
  const bPromise = fetch("/b");
  const [a, b] = await Promise.all([aPromise, bPromise]);
  console.log("Done faster");
}
```

This improves performance by running both requests concurrently.

---

### Top-Level Await (ES2022+)

`await` can now be used **outside of async functions** in ES modules (not scripts).

```js
const data = await fetch("/api/data").then((r) => r.json());
console.log(data);
```

This makes module initialization code cleaner and allows top-level async operations without wrapping them in an async function.

**Note:** Top-level await blocks module execution until the awaited promise settles, so use it carefully to avoid startup delays.